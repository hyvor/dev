#!/bin/sh

# Usage: ./run <component>
# Example: ./run core

set -e

component=$1

if [ -z "$component" ]; then
  echo "Component name is required. Usage: ./run <component>"
  exit 1
fi

echo "Running $component..."

# Dockerfile cannot copy from outside the context so we need to copy the files to the component folder
# copy internal/* to $component/internal except the vendor folder
rsync -a --exclude 'vendor' internal/ $component/backend/internal

cd $component
docker compose up --watch